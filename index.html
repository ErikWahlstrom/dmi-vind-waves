<!DOCTYPE html>


<html>

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5, user-scalable=yes, viewport-fit=cover" />
    <title>DMI Combo</title>
    <style>
        /* Critical CSS for instant render */
        html, body {
            width: 100%;
            height: 100%;
            padding: 0;
            margin: 0;
            background: #1a1a1a;
        }
        #pwd-area {
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            gap: 10px;
            background: #1a1a1a;
        }
        #pwd-area input {
            padding: 10px;
            font-size: 16px;
            border-radius: 4px;
            border: 1px solid #555;
            background: #2a2a2a;
            color: #fff;
        }
        #pwd-area button {
            padding: 10px 20px;
            font-size: 16px;
            cursor: pointer;
            border-radius: 4px;
            background: #4a9eff;
            color: #fff;
            border: none;
        }
    </style>
    <script src="shr.js" defer></script>
    <link rel="stylesheet" href="styles.css" />
</head>

<body>
    <div id="pwd-area">
        <input id="password" type="password" placeholder="password" />
        <button onclick="checkPassword()">Check password</button>
    </div>
    <div id="nice-area" style="display: none;">
        <img id="imgWind" alt="vind">         
        <img id="imgWave" class="shrink-img" alt="vind">
        <img id="imgDonn" class="shrink-img" alt="vind">
        
        <!-- Desktop slider -->
        <div class="slideRange desktop-slider">
            <button class="slider-btn" type="button" onclick="changeImageRel(-1)">
                <svg width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M7.5 2L3.5 6L7.5 10" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
            </button>
            <div class="slider-container">
                <input type="range" min="1" max="133" value="1" class="slider" id="myRange"
                    onchange="changeImage(this.value)" oninput="changeImage(this.value)">
                <div class="slider-info">
                    <span id="timeId"></span>
                    <button id="clearCache" type="button" onclick="clearCache()" title="Clear Cache (Force renewal of images, 66 Mb download)">
                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M21 10C21 10 18.995 7.26822 17.3662 5.63824C15.7373 4.00827 13.4864 3 11 3C6.02944 3 2 7.02944 2 12C2 16.9706 6.02944 21 11 21C15.1031 21 18.5649 18.2543 19.6482 14.5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M21 3V10H14" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </button>
                </div>
                <div id="progressBar" class="progress-bar">
                    <div id="progressFill" class="progress-fill"></div>
                </div>
            </div>
            <button class="slider-btn" type="button" onclick="changeImageRel(+1)">
                <svg width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M4.5 2L8.5 6L4.5 10" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
            </button>
        </div>
        
        <!-- Mobile slider 1 -->
        <div class="mobile-slider-item">
            <div class="mobile-slider-panel">
                <div class="mobile-slider-row">
                    <button class="slider-btn slider-btn-small" type="button" onclick="changeImageRel(-1)">
                        <svg width="10" height="10" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M7.5 2L3.5 6L7.5 10" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
                    </button>
                    <div class="mobile-slider-center">
                        <input type="range" min="1" max="133" value="1" class="slider mobile-range" onchange="changeImage(this.value)" oninput="changeImage(this.value)">
                        <span class="mobile-time"></span>
                    </div>
                    <button class="slider-btn slider-btn-small" type="button" onclick="changeImageRel(+1)">
                        <svg width="10" height="10" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M4.5 2L8.5 6L4.5 10" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
                    </button>
                </div>
            </div>
        </div>
        
        <!-- Mobile slider 2 -->
        <div class="mobile-slider-item">
            <div class="mobile-slider-panel">
                <div class="mobile-slider-row">
                    <button class="slider-btn slider-btn-small" type="button" onclick="changeImageRel(-1)">
                        <svg width="10" height="10" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M7.5 2L3.5 6L7.5 10" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
                    </button>
                    <div class="mobile-slider-center">
                        <input type="range" min="1" max="133" value="1" class="slider mobile-range" onchange="changeImage(this.value)" oninput="changeImage(this.value)">
                        <span class="mobile-time"></span>
                    </div>
                    <button class="slider-btn slider-btn-small" type="button" onclick="changeImageRel(+1)">
                        <svg width="10" height="10" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M4.5 2L8.5 6L4.5 10" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
                    </button>
                </div>
            </div>
        </div>
        
        <!-- Mobile slider 3 with info -->
        <div class="mobile-slider-item">
            <div class="mobile-slider-panel">
                <div class="mobile-slider-row">
                    <button class="slider-btn slider-btn-small" type="button" onclick="changeImageRel(-1)">
                        <svg width="10" height="10" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M7.5 2L3.5 6L7.5 10" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
                    </button>
                    <div class="mobile-slider-center">
                        <input type="range" min="1" max="133" value="1" class="slider mobile-range" onchange="changeImage(this.value)" oninput="changeImage(this.value)">
                        <span class="mobile-time"></span>
                    </div>
                    <button class="slider-btn slider-btn-small" type="button" onclick="changeImageRel(+1)">
                        <svg width="10" height="10" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M4.5 2L8.5 6L4.5 10" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
                    </button>
                </div>
            </div>
            <div class="progress-bar mobile-progress"><div class="progress-fill" id="progressFillMobile"></div></div>
        </div>
        
        <div id="clearCachePos" style="display:none">
        </div>
    </div>

<script>

    var str = ''
    var max = 133;
    let indexOutside = 0;

    // Robust issuance time calculation (avoids month boundary issues from manual day math)
    (function computeIssuance(){
        const now = new Date();
        const utcHour = now.getUTCHours();
        // Select latest completed cycle among 18,12,6,0 UTC
        let cycleHour;
        if (utcHour > 18) cycleHour = 12; // after 18Z but before 24Z -> last completed is 12Z
        else if (utcHour > 12) cycleHour = 6;
        else if (utcHour > 6) cycleHour = 0;
        else cycleHour = 18; // previous day 18Z

        const issuance = new Date(Date.UTC(
            now.getUTCFullYear(),
            now.getUTCMonth(),
            now.getUTCDate(),
            cycleHour, 0, 0, 0
        ));
        if (cycleHour === 18 && utcHour <= 6) {
            // Move to previous day's 18Z without constructing invalid YYYY-MM-00 date strings
            issuance.setUTCDate(issuance.getUTCDate() - 1);
        }
        window.localStartDate = new Date(issuance); // base forecast start
        window.lastCache = issuance.toISOString();
    })();

    let forcedUpdate = undefined;

    console.log("lastCache", lastCache);
    let localStartDate = new Date(lastCache);
    console.log("lastCache localtime", localStartDate);

    isLoading = true;

    const weekday = ["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];

    function changeImage(index) {
        console.log("change image", index);
        document.getElementById("imgWind").src = `https://ocean.dmi.dk/anim/plots/win.ba.${index}.png?cache=${lastCache+(forcedUpdate??"")}`
        document.getElementById("imgWave").src = `https://ocean.dmi.dk/anim/plots/hs.ba.${index}.png?cache=${lastCache+(forcedUpdate??"")}`
        document.getElementById("imgDonn").src = `https://ocean.dmi.dk/anim/plots/hsw.ba.${index}.png?cache=${lastCache+(forcedUpdate??"")}`
        indexOutside = parseInt(index);
        const currentDate = new Date(new Date(localStartDate).getTime() + ((index-1) * 3600 * 1000));
        console.log("currentDate", currentDate, localStartDate, new Date(localStartDate).getTime(), (index * 3600 * 1000));
        
        // Short, consistent 24h format: YYYY-MM-DD HH:mm (Weekday)
        const pad = n => n.toString().padStart(2,'0');
        const timeText = `${currentDate.getFullYear()}-${pad(currentDate.getMonth()+1)}-${pad(currentDate.getDate())} ${pad(currentDate.getHours())}:${pad(currentDate.getMinutes())} - ${weekday[currentDate.getDay()]}`;
        const desktopTime = document.getElementById("timeId");
        if (desktopTime) desktopTime.textContent = timeText;
        document.querySelectorAll('.mobile-time').forEach(span => span.textContent = timeText);
        
        // Sync all sliders
        document.getElementById('myRange').value = index;
        document.querySelectorAll('.mobile-range').forEach(slider => {
            slider.value = index;
        });
    }

    function changeImageRel(rel) {
        rel = parseInt(rel);
        console.log("change image rel", rel, indexOutside);
        indexOutside += rel;
        console.log("change image rel", indexOutside);
        if (indexOutside > max) {
            indexOutside = max;
        }
        if (indexOutside < 1) {
            indexOutside = 1;
        }
        changeImage(indexOutside);
        document.getElementById('myRange').value = indexOutside;
    }


    function changeImageClick(index) {
        console.log("change image click", index);
        changeImage(index);
    }

    function clearCache() {
        console.log("clear cache");        
        preLoadImages(true);
    }

    function checkPassword(pwd) {
        const password = pwd ? pwd : document.getElementById("password").value;
        if (cyrb53(password) === 8752902336368466) {
            localStorage.setItem("password", password);
            document.getElementById("pwd-area").style.display = "none";
            document.getElementById("nice-area").style = undefined;
            
            // Make UI interactive immediately, load first image async
            setTimeout(() => {
                changeImage(1);
                // Start background preload after first image starts loading
                setTimeout(() => {
                    preLoadImages();
                }, 500);
            }, 0);
        }
    }

    const cyrb53 = (str, seed = 0) => {
        let h1 = 0xdeadbeef ^ seed, h2 = 0x41c6ce57 ^ seed;
        for (let i = 0, ch; i < str.length; i++) {
            ch = str.charCodeAt(i);
            h1 = Math.imul(h1 ^ ch, 2654435761);
            h2 = Math.imul(h2 ^ ch, 1597334677);
        }
        h1 = Math.imul(h1 ^ (h1 >>> 16), 2246822507);
        h1 ^= Math.imul(h2 ^ (h2 >>> 13), 3266489909);
        h2 = Math.imul(h2 ^ (h2 >>> 16), 2246822507);
        h2 ^= Math.imul(h1 ^ (h1 >>> 13), 3266489909);

        return 4294967296 * (2097151 & h2) + (h1 >>> 0);
    };

    // Auto-check saved password after page renders
    setTimeout(() => {
        const savedPwd = localStorage.getItem("password");
        if (savedPwd) {
            checkPassword(savedPwd);
        }
    }, 0);


    //Preload images

    function updateProgress(loaded, total) {
        const progressBar = document.getElementById("progressBar");
        const progressFill = document.getElementById("progressFill");
        const progressFillMobile = document.getElementById("progressFillMobile");
        
        const percent = (loaded / total) * 100;
        
        if (progressFill) {
            progressFill.style.width = percent + '%';
        }
        if (progressFillMobile) {
            progressFillMobile.style.width = percent + '%';
        }
        
        if (progressBar) {
            const mobileProgress = document.querySelector('.mobile-progress');
            if (loaded >= total) {
                setTimeout(() => {
                    progressBar.style.opacity = '0';
                    if (mobileProgress) mobileProgress.style.opacity = '0';
                }, 500);
            } else {
                progressBar.style.display = 'block';
                progressBar.style.opacity = '1';
                if (mobileProgress) mobileProgress.style.opacity = '1';
            }
        }
    }

    function preLoadImages(force) {
        forcedUpdate = force ? Math.random() : undefined;
        const clearCacheBtn = document.getElementById("clearCache");
        const clearCacheMobile = document.getElementById("clearCacheMobile");
        
        if (clearCacheBtn) {
            clearCacheBtn.disabled = true;
            clearCacheBtn.style.opacity = '0.5';
        }
        if (clearCacheMobile) {
            clearCacheMobile.disabled = true;
            clearCacheMobile.style.opacity = '0.5';
        }
        
        isLoading = true;
        list = [];
        maxIndex = 134;
        let loadCount = 0;
        const totalImages = (maxIndex - 1) * 3;
        
        // Show initial progress
        updateProgress(0, totalImages);
        
        for (var i = 1; i < maxIndex; i++) {
            var img1 = new Image();
            var img2 = new Image();
            var img3 = new Image();
            
            const onImageLoad = function () {
                var index = list.indexOf(this);
                loadCount++;
                updateProgress(loadCount, totalImages);
                
                if (index !== -1) {
                    list.splice(index, 1);
                }

                if (loadCount === totalImages) {
                    console.log("loaded all");
                    if (clearCacheBtn) {
                        clearCacheBtn.disabled = false;
                        clearCacheBtn.style.opacity = '1';
                    }
                    if (clearCacheMobile) {
                        clearCacheMobile.disabled = false;
                        clearCacheMobile.style.opacity = '1';
                    }
                    isLoading = false;
                }
            };
            
            img1.onload = onImageLoad;
            img2.onload = onImageLoad;
            img3.onload = onImageLoad;

            list.push(img1);
            list.push(img2);
            list.push(img3);

            img1.src = `https://ocean.dmi.dk/anim/plots/win.ba.${i}.png?cache=${lastCache+(forcedUpdate??"")}`
            img2.src = `https://ocean.dmi.dk/anim/plots/hs.ba.${i}.png?cache=${lastCache+(forcedUpdate??"")}`
            img3.src = `https://ocean.dmi.dk/anim/plots/hsw.ba.${i}.png?cache=${lastCache+(forcedUpdate??"")}`
        }
    }

    // changeImage(1) and preLoadImages() are now called from checkPassword() 
    // after password validation to make UI interactive immediately

    // Prevent page from vertically jittering while dragging mobile sliders
    // AND keep sliders at screen width even when zoomed
    (function initMobileSliderScrollLock(){
        const mql = window.matchMedia('(max-width: 992px)');
        if(!mql.matches) return;
        
        // Wait for DOM to be fully ready
        setTimeout(() => {
            let savedScrollY = 0;
            let isDragging = false;
            
            const startDrag = (e) => {
                savedScrollY = window.scrollY;
                isDragging = true;
            };
            
            const endDrag = (e) => {
                isDragging = false;
            };
            
            // Adjust slider width/position based on zoom level
            function adjustSlidersForZoom() {
                const zoom = window.visualViewport ? window.visualViewport.scale : 1;
                const viewportWidth = window.visualViewport ? window.visualViewport.width : window.innerWidth;
                const viewportOffsetLeft = window.visualViewport ? window.visualViewport.offsetLeft : 0;
                
                document.querySelectorAll('.mobile-slider-item').forEach(item => {
                    if (zoom > 1.05) {
                        // Zoomed in - fix sliders to viewport
                        item.style.position = 'fixed';
                        item.style.left = `${viewportOffsetLeft}px`;
                        item.style.width = `${viewportWidth}px`;
                        item.style.transform = `scale(${1/zoom})`;
                        item.style.transformOrigin = 'left center';
                        item.style.zIndex = '1000';
                    } else {
                        // Normal zoom - reset
                        item.style.position = '';
                        item.style.left = '';
                        item.style.width = '';
                        item.style.transform = '';
                        item.style.transformOrigin = '';
                        item.style.zIndex = '';
                    }
                });
            }
            
            // Listen for zoom changes
            if (window.visualViewport) {
                window.visualViewport.addEventListener('resize', adjustSlidersForZoom);
                window.visualViewport.addEventListener('scroll', adjustSlidersForZoom);
            }
            window.addEventListener('resize', adjustSlidersForZoom);
            
            // Initial adjustment
            adjustSlidersForZoom();
            
            document.querySelectorAll('.mobile-range').forEach(r=>{
                // Mark slider containers to prevent scroll
                const container = r.closest('.mobile-slider-item');
                if (container) {
                    container.style.position = 'relative';
                    container.style.zIndex = '10';
                }
                
                // Touch events - let them work naturally
                r.addEventListener('touchstart', (e) => {
                    savedScrollY = window.scrollY;
                    isDragging = true;
                }, {passive: true});
                
                r.addEventListener('touchend', (e) => {
                    isDragging = false;
                }, {passive: true});
                
                r.addEventListener('touchcancel', (e) => {
                    isDragging = false;
                }, {passive: true});
                
                // Desktop testing
                r.addEventListener('mousedown', startDrag);
                r.addEventListener('mouseup', endDrag);
            });
            
            // Only prevent WINDOW scroll, not input interaction
            let scrollTimeout;
            window.addEventListener('scroll', (e) => {
                if (isDragging) {
                    clearTimeout(scrollTimeout);
                    scrollTimeout = setTimeout(() => {
                        window.scrollTo(0, savedScrollY);
                    }, 0);
                }
            }, {passive: true});
            
        }, 100);
    })();



</script>

<style>
    html,
    body {
        width: 100%;
        height: 100%;
        padding: 0;
        margin: 0;
        background: #1a1a1a;
    }

    body.scroll-lock {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        width: 100%;
        overflow: hidden;
        touch-action: none;
        -webkit-overflow-scrolling: auto;
    }
    
    #nice-area {
        width: 100%;
        min-height: 100vh;
        height: 100vh;
        display: grid;
        grid-template-columns: 1fr 1fr;
        grid-template-rows: 1fr 1fr;
        gap: 6px;
        padding: 6px;
        padding-bottom: 90px;
        box-sizing: border-box;
        background: #1a1a1a;
        overflow: hidden;
        position: relative;
        overscroll-behavior: contain;
    }

    p {
        font-size: 6px;
        margin: 0;
        padding: 0;
    }

    img {
        width: 100%;
        height: 100%;
        max-height: 100%;
        object-fit: contain;
        border: none;
        border-radius: 8px;
        position: relative;
        box-sizing: border-box;
        display: block;
        background: #2a2a2a;
    }

    #imgWind {
        grid-column: 1;
        grid-row: 1;
        min-height: 0;
    }

    #imgWave {
        grid-column: 2;
        grid-row: 1;
        min-height: 0;
    }

    #imgDonn {
        grid-column: 1 / -1;
        grid-row: 2;
        min-height: 0;
    }

    #clearCachePos {
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background: rgba(255, 255, 255, 0.95);
        padding: 20px 30px;
        border-radius: 12px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
        color: #333;
        z-index: 1001;
        font-size: 18px;
        font-weight: 600;
    }
    
    #clearCachePos span {
        color: #0081c5;
        font-weight: 600;
    }
    
    #clearCache {
        padding: 4px;
        background: transparent;
        color: #888;
        border: none;
        border-radius: 6px;
        cursor: pointer;
        font-size: 16px;
        transition: all 0.2s ease;
        margin-left: 8px;
        display: flex;
        align-items: center;
        justify-content: center;
        line-height: 0;
    }
    
    #clearCache:disabled {
        cursor: not-allowed;
        opacity: 0.5;
    }
    
    #clearCache svg {
        transition: transform 0.3s ease;
    }
    
    #clearCache:hover {
        background: rgba(255, 255, 255, 0.1);
        color: #aaa;
    }
    
    #clearCache:hover svg {
        transform: rotate(180deg);
    }



    /* On screens that are 992px or less, set the background color to blue */
    @media screen and (max-width: 992px) {
        #nice-area {
            display: flex;
            flex-direction: column;
            padding: 10px;
            padding-bottom: 20px;
            height: auto;
            min-height: 100vh;
            overflow: visible;
            gap: 10px;
            /* Prevent iOS scroll snap behavior */
            scroll-snap-type: none;
            -webkit-overflow-scrolling: touch;
        }
        
        .desktop-slider {
            display: none !important;
        }
        
        .mobile-slider-item { 
            display: flex !important; 
            width: 100%;
            /* Prevent this container from triggering scroll-into-view */
            overflow: visible;
            contain: layout;
        }
        
        .mobile-range {
            flex: 1;
            min-width: 100px;
            /* Critical: prevent iOS from scrolling page when range input is touched */
            scroll-margin-block: 0 !important;
            scroll-margin-inline: 0 !important;
            scroll-margin: 0 !important;
            /* Allow the slider to be draggable */
            pointer-events: auto;
            -webkit-user-select: none;
            user-select: none;
        }
        
        img {
            min-height: 0;
            height: auto;
            width: 100%;
            aspect-ratio: 16 / 9;
            /* Prevent iOS from auto-scrolling when adjacent elements are interacted */
            scroll-margin: 0 !important;
            scroll-snap-align: none;
        }
        
        #imgWind {
            order: 1;
        }
        
        .mobile-slider-item:nth-child(5) {
            order: 2;
        }

        #imgWave {
            order: 3;
        }
        
        .mobile-slider-item:nth-child(6) {
            order: 4;
        }

        #imgDonn {
            order: 5;
        }
        
        .mobile-slider-item:nth-child(7) {
            order: 6;
        }
    }

    #slideContainer {
        display: none;
    }

    .slideRange {
        display: flex;
        align-items: center;
        justify-content: center;
        position: fixed;
        bottom: 0;
        bottom: env(safe-area-inset-bottom, 0);
        left: 0;
        right: 0;
        width: 100%;
        max-width: 100vw;
        padding: 12px 16px;
        padding-bottom: calc(12px + env(safe-area-inset-bottom, 0));
        background: rgba(42, 42, 42, 0.98);
        border-radius: 0;
        box-shadow: 0 -4px 32px rgba(0, 0, 0, 0.4);
        backdrop-filter: blur(20px);
        border-top: 1px solid rgba(255, 255, 255, 0.1);
        z-index: 9999;
        gap: 12px;
        touch-action: none;
        -webkit-user-select: none;
        user-select: none;
        box-sizing: border-box;
        transform: translateZ(0);
        -webkit-transform: translateZ(0);
        -webkit-backface-visibility: hidden;
        backface-visibility: hidden;
        will-change: transform;
    }
    
    .desktop-slider {
        display: flex;
    }
    

    .mobile-slider-panel {
        background: rgba(42,42,42,0.95);
        border-radius: 8px;
        padding: 4px 6px 2px;
        width: 100%;
        display: flex;
        flex-direction: column;
        gap: 0;
    }

    .mobile-slider-row {
        display: flex;
        align-items: center;
        gap: 6px;
        width: 100%;
        position: relative;
        height: 44px; /* fixed height prevents page jump */
    }

    .mobile-slider-center {
        flex: 1;
        position: relative;
        min-width: 0;
        height: 100%;
    }

    .mobile-slider-center .mobile-range {
        position: absolute;
        top: 2px;
        left: 0;
        right: 0;
        width: 100%;
        margin: 0;
        /* Prevent iOS scroll-into-view on touch */
        -webkit-user-select: none;
        user-select: none;
        touch-action: pan-x;
        scroll-margin: 0;
        scroll-snap-align: none;
    }

    .mobile-slider-center .mobile-time {
        position: absolute;
        bottom: 2px;
        left: 0;
        right: 0;
        font-size: 9px;
        line-height: 1.1;
        text-align: center;
        color: #bbb;
        font-variant-numeric: tabular-nums;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
        pointer-events: none;
    }
    
    .slider-btn-small {
        width: 30px;
        height: 30px;
        font-size: 12px;
        padding: 0;
    }

    /* Old per-row range move removed; handled inside .mobile-slider-center */
    
    
    .mobile-slider-item {
        display: none;
        flex-direction: column;
        margin-bottom: 8px;
        /* Ensure smooth transitions when zoom adjusts position */
        transition: none; /* No transition on position changes */
        will-change: transform, left, width;
        box-sizing: border-box;
    }
    
    .mobile-progress {
        height: 2px;
        background: rgba(255, 255, 255, 0.1);
        border-radius: 8px;
        overflow: hidden;
        opacity: 0;
        transition: opacity 0.3s ease;
        display: block; /* keep space reserved */
    }
    
    @media screen and (max-width: 600px) {
        .slideRange {
            padding: 10px 12px;
        }
    }

    * {
        -ms-touch-action: manipulation;
        touch-action: manipulation;
    }
    
    .slider-btn {
        background: #3a3a3a;
        color: #ffffff;
        border: 1px solid rgba(255, 255, 255, 0.1);
        border-radius: 10px;
        width: 44px;
        height: 44px;
        font-size: 16px;
        cursor: pointer;
        transition: all 0.2s ease;
        display: flex;
        align-items: center;
        justify-content: center;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
        flex-shrink: 0;
        padding: 0;
    }
    
    .slider-btn svg {
        transition: transform 0.2s ease;
    }
    
    .slider-btn:hover {
        background: #4a4a4a;
        transform: scale(1.05);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4);
    }
    
    .slider-btn:hover svg {
        transform: scale(1.1);
    }
    
    .slider-btn:active {
        transform: scale(0.95);
        background: #2a2a2a;
    }
    
    .slider {
        flex: 1;
        min-width: 150px;
        width: 100%;
        touch-action: pan-x;
    }
    
    .slider-container {
        flex: 1;
        display: flex;
        flex-direction: column;
        gap: 4px;
        min-width: 0;
        position: relative;
    }
    
    .progress-bar {
        position: absolute;
        bottom: 0;
        left: 0;
        right: 0;
        height: 2px;
        background: rgba(255, 255, 255, 0.1);
        border-radius: 1px;
        overflow: hidden;
        opacity: 0;
        transition: opacity 0.3s ease;
        display: none;
    }
    
    .progress-fill {
        height: 100%;
        background: linear-gradient(90deg, #4a9eff, #7b61ff);
        border-radius: 1px;
        transition: width 0.3s ease;
        width: 0%;
    }
    
    .slider-info {
        display: flex;
        align-items: center;
        justify-content: space-between;
        font-size: 11px;
        color: #aaaaaa;
        padding: 0 4px;
        gap: 8px;
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
    }
    
    .slider-info span {
        flex: 1;
        text-align: center;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
    }
    
    @media screen and (max-width: 768px) {
        .slider-info {
            font-size: 9px;
        }
        
        #clearCache {
            font-size: 12px;
        }
    }
    
    input[type=range]::-webkit-slider-thumb {
        cursor: pointer;
    }
    
    input[type=range]::-moz-range-thumb {
        cursor: pointer;
    }
    
    input[type=range]::-ms-thumb {
        cursor: pointer;
    }
</style>

</body>
</html>